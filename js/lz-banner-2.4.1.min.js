(function(f){f.extend({isArray:function(g){return Object.prototype.toString.call(g)==="[object Array]";},addBannerEffect:function(g,h){a.prototype[g]=function(){h.call({obj:this.$ele,param:this.param,status:this.status});
};},isObject:function(g){return Object.prototype.toString.call(g)==="[object Object]";},effectParam:function(n){var k=f(n),g=k.data("lzbanner-status"),j=g.imgW,m=g.imgH,h=[],l=k.data("lzbanner-param");
if(l.dir=="left"||l.dir=="right"){h.push({left:j});h.push({left:-j});h.push({left:0});}else{if(l.dir=="up"||l.dir=="down"){h.push({top:m});h.push({top:-m});
h.push({top:0});}}return h;}});var a=function(g){this.$ele=f(g);this.param=this.$ele.data("lzbanner-param");this.status=this.$ele.data("lzbanner-status");
this.imgBox=this.$ele.data("lzbanner-imgBox");this.img=this.$ele.data("lzbanner-img");};a.prototype.setEvent=function(){var g=this,h=this.param;if(f.isArray(h.event)){f.each(h.event,function(j,k){g[k]&&g[k]();
});}else{g[h.event]&&g[h.event]();}};a.prototype.wheel=function(){var h=this.$ele,g=this.status;h.off("mousewheel.lzbanner DOMMouseScroll.lzbanner").on("mousewheel.lzbanner DOMMouseScroll.lzbanner",function(j){if(g.flag&&g.mouseH){j.preventDefault();
var k=(j.originalEvent.wheelDelta&&(j.originalEvent.wheelDelta>0?1:-1))||(j.originalEvent.detail&&(j.originalEvent.detail>0?-1:1));if(k>0){g.cPoint--;}if(k<0){g.cPoint++;
}h.bannerExcute();}});};a.prototype.keyboard=function(){var h=this.$ele,g=this.status;f(window).on("keydown",function(j){if(g.flag&&g.mouseH){j.preventDefault();
if(j.keyCode==37||j.keyCode==38){g.cPoint--;}if(j.keyCode==39||j.keyCode==40){g.cPoint++;}h.bannerExcute();}});};a.prototype.btn=function(){var l=this.$ele,n=this.param,h=this.status,k=this.imgBox,j=this.img,m=h.imgLen,g=0;
var o=f("<ul class='"+n.btnCls[0]+"'></ul>");l.append(o.get(0));pointInBox=f("<li class='"+n.btnCls[1]+"'></li>");o.append(pointInBox.get(0));point="<div class='"+n.btnCls[2]+"'></div>";
for(i=0;i<m;pointInBox.append(point),i++){}g=o.find("div").eq(0).outerWidth(true)*m;pointInBox.css("width",g).find("div").eq(0).addClass(n.btnCls[3]);o.find("div").off(".lzbanner").on("click.lzbanner",function(p){if(h.flag){if(h.cPoint!=f(this).index()){h.cPoint=f(this).index();
l.bannerExcute();}}});};a.prototype.arrow=function(){var j=this.$ele,l=this.param,h=this.status,k=h.imgLen;var g=f("<ul class='"+l.arrowCls[0]+"'></ul>");
j.append(g.get(0));if(l.arrowStyle){arrowP="<li class='"+l.arrowCls[1]+"'>&lt;</li><li class='"+l.arrowCls[2]+"'>&gt;</li>";}else{arrowP="<li class='"+l.arrowCls[1]+"'></li><li class='"+l.arrowCls[2]+"'></li>";
}g.append(arrowP);g.find("li").eq(0).off(".lzbanner").on("click.lzbanner",function(m){if(h.flag){h.cPoint--;j.bannerExcute();}});g.find("li").eq(1).off(".lzbanner").on("click.lzbanner",function(m){if(h.flag){h.cPoint++;
j.bannerExcute();}});};var e=function(g){this.$ele=f(g);this.param=this.$ele.data("lzbanner-param");this.status=this.$ele.data("lzbanner-status");this.img=this.$ele.data("lzbanner-img");
};e.prototype.setEffect=function(){var h=this,j=this.param,g=this.status;if(f.isArray(j.effect)){h[j.effect[g.sPoint]]?h[j.effect[g.sPoint]]():h.defaults();
}else{h[j.effect]?h[j.effect]():h.defaults();}};e.prototype.defaults=function(){var j=f.effectParam(this.$ele),k=this.param,g=this.status,h=this.img;h.css(j[2]).eq(g.cPoint).css("zIndex",30);
if(g.nPoint>g.sPoint){h.eq(g.cPoint).css(j[0]).animate(j[2],k.speed);h.eq(g.sPoint).animate(j[1],k.speed);}else{if(g.nPoint<g.sPoint){h.eq(g.cPoint).css(j[1]).animate(j[2],k.speed);
h.eq(g.sPoint).animate(j[0],k.speed);}}};e.prototype.fade=function(){var h=this.img,j=this.param,g=this.status;h.eq(g.cPoint).css({top:0,left:0,zIndex:35,display:"none"}).fadeIn(j.speed);
};e.prototype.cut=function(){var h=this.img,g=this.status;h.eq(g.cPoint).css({top:0,left:0,zIndex:35});};var d=function(g){this.$ele=f(g);this.status=this.$ele.data("lzbanner-status");
this.img=this.$ele.data("lzbanner-img");this.param=this.$ele.data("lzbanner-param");};d.prototype.autoPlay=function(){var h=this.$ele,g=this.status,j=this.param;
(j.dir=="left"||j.dir=="up")?g.cPoint++:g.cPoint--;h.bannerExcute();};d.prototype.indexChange=function(){var g=this.status,h=g.imgLen,j=this.param;if(!j.cycle&&g.cPoint>h-1){g.cPoint=h-1;
return false;}else{if(!j.cycle&&g.cPoint<0){g.cPoint=0;return false;}else{if(j.cycle&&g.cPoint>h-1){g.cPoint=0;return true;}else{if(j.cycle&&g.cPoint<0){g.cPoint=h-1;
return true;}else{return true;}}}}};d.prototype.excuteEffect=function(){var j=this,g=this.status,l=this.param,h=this.img,k=this.$ele.get(0).bannereffect;
var m=this.$ele.find("."+l.btnCls[0]).find("div");if(m){m.removeClass(l.btnCls[3]).eq(g.cPoint).addClass(l.btnCls[3]);}h.css({zIndex:0,display:"none"});
h.eq(g.sPoint).css({zIndex:30,display:"block"});h.eq(g.cPoint).css("display","block");k.setEffect();g.sPoint=g.cPoint;};d.prototype.onProgress=function(){var h=this,g=this.status,j=this.param;
g.nPoint=g.cPoint;endPoint=h.indexChange();if(endPoint){h.excuteEffect();if(g.sPoint==g.imgLen-1&&j._onLast){j._onLast.call(this,j,g);}j._onSwitch&&j._onSwitch.call(this,j,g);
g.flag=false;setTimeout(function(){g.flag=true;},j.speed);}};var c=function(k,h,g,l,j){this.$ele=f(k);this.$ele.data("lzbanner-param",this.initParam(h,g,l,j));
this.$ele.data("lzbanner-imgBox",this.$ele.children().first());this.$ele.data("lzbanner-img",this.$ele.data("lzbanner-imgBox").children());this.$ele.data("lzbanner-status",{flag:true,mouseH:false,cPoint:0,sPoint:0,nPoint:0,imgW:this.$ele.width(),imgH:this.$ele.height(),imgLen:this.$ele.data("lzbanner-img").length,timer:null});
};c.prototype.initEvent=function(){var k=this.$ele,h=k.get(0),g=k.data("lzbanner-status"),l=k.data("lzbanner-param"),j=new a(k);f(window).resize(function(m){g.imgW=k.width();
g.imgH=k.height();});k.off(".lzbanner").on("mouseover.lzbanner",function(m){clearInterval(g.timer);g.timer=null;g.mouseH=true;}).on("mouseout.lzbanner",function(m){l.auto&&(g.timer=setInterval(h.bannerexcute.autoPlay.bind(h.bannerexcute),l.interval));
g.mouseH=false;});j.setEvent();l.auto&&(g.timer=setInterval(h.bannerexcute.autoPlay.bind(h.bannerexcute),l.interval));};c.prototype.layout=function(){var j=this.$ele,g=j.data("lzbanner-status"),h=j.data("lzbanner-imgBox");
img=j.data("lzbanner-img");j.hide().css("position","relative");h.css("position","absolute").addClass("lz-bannerImg").children().css("position","absolute").addClass("lz-bannerImg-images");
img.css({display:"none",zIndex:0}).eq(0).css({display:"block",zIndex:30});h.nextAll().css("zIndex",50);j.show();};c.prototype.initParam=function(h,g,l,k){var j={dir:"left",effect:"defaults",speed:600,interval:3000,event:["btn","arrow"],auto:true,cycle:true,btnCls:["lz-bannerPoint-box","lz-bannerPoint","lz-bannerPoint-point","lz-bannerPoint-hover"],arrowCls:["lz-bannerBtn","lz-bannerBtn-left","lz-bannerBtn-right"],arrowStyle:true,_onSwitch:null,_onLast:null};
if(f.isObject(h)){j=f.extend({},j,h);}else{j.dir=h;j.interval=g;j.speed=l;j.effect=k;!isNaN(h)&&(j.interval=h,j.speed=g);(h=="left"||h=="right"||h=="up"||h=="down")?(j.dir=h):(effect=h);
typeof h==="function"&&(j._onSwitch=h);}if(this.$ele.data("banner-param")){f.extend({},j,this.$ele.data("banner-param"));}j.dir=(j.dir=="left"||j.dir=="right"||j.dir=="up"||j.dir=="down")?j.dir:"left";
j.speed=(j.speed==null)?600:j.speed;j.interval=(j.interval==null)?3000:j.interval;j.interval=="fast"&&(j.interval=1500,j.speed=300);j.interval=="medium"&&(j.interval=3000,j.speed=600);
j.interval=="slow"&&(j.interval=6000,j.speed=1200);(isNaN(j.interval)||isNaN(j.speed))&&(j.interval=3000,j.speed=600);(j.interval<j.speed)&&jQuery.error("参数设置错误 动画间隔小于动画速度");
j.auto=(j.auto===false)?false:true;j.cycle=(j.cycle===false)?false:true;j.arrowStyle=(j.arrowStyle===false)?false:true;typeof j._onSwitch!=="function"&&(j._onSwitch=null);
typeof j._onLast!=="function"&&(j._onLast=null);(this.imgLen<=1)&&(j.auto=false,j.event="");return j;};var b=function(g){this.$ele=f(g);};b.prototype.destory=function(){var g=this.$ele;
f.each(g,function(k,m){var j=f(m),h=j.data("lzbanner-status"),l=j.data("lzbanner-param");if(h.timer){clearInterval(h.timer);}j.off("lzbanner");if(btn=j.find(l.btnCls[0])){btn.remove();
}if(arrow=j.find(l.arrowCls[0])){btn.remove();}j.removeData("lzbanner-status").removeData("lzbanner-param");});return false;};b.prototype.init=function(h,g,l,k){var j=this.$ele;
f.each(j,function(o,q){var n=f(q),m=n.data("lzbanner-status"),p=n.data("lzbanner-param");if(m.timer){clearInterval(m.timer);}n.off("lzbanner");if(btn=n.find(p.btnCls[0])){btn.remove();
}if(arrow=n.find(p.arrowCls[0])){btn.remove();}n.removeData("lzbanner-status").removeData("lzbanner-param");});j.lzbanner(h,g,l,k);};b.prototype.index=function(g){var h=this.$ele;
if(g===undefined){return h.eq(0).data("lzbanner-status").sPoint+1;}else{f.each(h,function(j,k){f(k).data("lzbanner-status").cPoint=g-1;f(k).bannerExcute();
});return this;}};b.prototype.next=function(){var g=this;var h=this.$ele;f.each(h,function(k,m){g.stop();var j=f(m).data("lzbanner-status"),l=f(m).data("lzbanner-param");
if(j.flag){j.cPoint+=1;f(m).bannerExcute();}l.auto&&g.start();});return this;};b.prototype.prev=function(){self=this;var g=this.$ele;f.each(g,function(j,l){self.stop();
var h=f(l).data("lzbanner-status"),k=f(l).data("lzbanner-param");if(h.flag){h.cPoint-=1;f(l).bannerExcute();}k.auto&&self.start();});return this;};b.prototype.setInterval=function(g){var h=this.$ele;
f.each(h,function(j,l){var k=f(l).data("lzbanner-param");g>k.speed&&(k.interval=g);});return this;};b.prototype.setSpeed=function(g){var h=this.$ele;f.each(h,function(j,l){var k=f(l).data("lzbanner-param");
g<k.interval&&(k.speed=g);});return this;};b.prototype.setEffect=function(g){var h=this.$ele;f.each(h,function(j,k){f(k).data("lzbanner-param").effect=g;
});return this;};b.prototype.setDirection=function(h){var g=this.$ele;f.each(g,function(j,k){f(k).data("lzbanner-img").css({top:0,left:0});f(k).data("lzbanner-param").dir=h;
});return this;};b.prototype.start=function(){var g=this.$ele;f.each(g,function(j,l){var h=f(l).data("lzbanner-status"),k=f(l).data("lzbanner-param");if(!h.timer){h.timer=setInterval(l.bannerexcute.autoPlay.bind(l.bannerexcute),k.interval);
}});return this;};b.prototype.stop=function(){var g=this.$ele;f.each(g,function(j,k){var h=f(k).data("lzbanner-status");if(h.timer){clearInterval(h.timer);
h.timer=null;}});return this;};b.prototype.onCycle=function(){var g=this.$ele;f.each(g,function(h,j){f(j).data("lzbanner-param").cycle=true;});return this;
};b.prototype.offCycle=function(){var g=this.$ele;f.each(g,function(h,j){f(j).data("lzbanner-param").cycle=false;});return this;};b.prototype.on=function(j,g){var h=this.$ele;
if(typeof g==="function"){f.each(h,function(k,l){j==="switch"&&(f(l).data("lzbanner-param")._onSwitch=g);j==="last"&&(f(l).data("lzbanner-param")._onLast=g);
});}};f.fn.bannerTool=function(){var g=f(this);return new b(g);};f.fn.bannerExcute=function(){var g=f(this).get(0);g.bannerexcute.onProgress();};f.fn.lzbanner=function(h,g,l,k){var j=f(this);
f.each(j,function(n,o){var m=new c(o,h,g,l,k);o.bannerexcute=new d(o);o.bannereffect=new e(o);m.initEvent();m.layout();});return j.bannerTool();};})(jQuery);
